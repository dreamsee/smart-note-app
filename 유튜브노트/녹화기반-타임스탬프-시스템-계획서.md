# 🎬 녹화 기반 타임스탬프 시스템 개발 계획서

## 📋 프로젝트 개요

**목표**: 영상 시청 중 실시간으로 타임스탬프를 생성하고, 노래방 스타일의 직관적 편집 환경을 제공하는 고급 영상 분석 도구 개발

**핵심 컨셉**: "녹화 기반 생성 + 스마트 그룹핑 + 노래방 스타일 편집"

---

## 🎯 시스템 아키텍처

### 1단계: 녹화 모드
```
[🔴 녹화 시작] → 실시간 조작 감지 → 타임스탬프 자동 생성 → [⏹️ 녹화 종료]
```

### 2단계: 스마트 그룹핑
```
개별 타임스탬프들 → 연속 조정 감지 → 자동 묶음 처리 → 정리된 세션
```

### 3단계: 편집 환경
```
카드 선택 → 편집 패널 팝업 → 노래방 스타일 재생 → 정밀 편집
```

---

## 🚀 상세 기능 명세

### Phase 1: 기본 녹화 시스템

#### 1.1 녹화 모드 구현
**기능**:
- 🔴 녹화 시작/종료 버튼
- 실시간 조작 감지 (속도, 볼륨, 시간 점프)
- 키보드 단축키 지원 (스페이스바, 화살표 등)
- 밀리초 단위 정밀도 (0.001초)

**데이터 구조**:
```typescript
interface RecordingSession {
  id: string;
  title: string;
  videoId: string;
  duration: number;
  totalTimestamps: number;
  createdAt: Date;
  updatedAt: Date;
  rawTimestamps: RawTimestamp[];
  processedGroups: TimestampGroup[];
}

interface RawTimestamp {
  id: string;
  time: number;          // 12.345 (초.밀리초)
  action: 'speed' | 'volume' | 'seek' | 'pause' | 'manual';
  value: number;         // 변경된 값
  previousValue: number; // 이전 값
  timestamp: Date;       // 생성 시각
}
```

#### 1.2 실시간 감지 로직
- YouTube Player API 이벤트 리스너
- 사용자 조작 패턴 분석
- 연속 조정 시간 간격 측정

### Phase 2: 스마트 그룹핑 시스템

#### 2.1 자동 묶음 감지
**그룹핑 조건**:
- 시간 간격: 3초 이내 연속 조정
- 동일 타입: 같은 속성 조정
- 점진적 변화: 일정한 방향성
- 임계값: 최소 3개 이상의 연속 조정

**데이터 구조**:
```typescript
interface TimestampGroup {
  id: string;
  type: 'speed' | 'volume' | 'mixed';
  startTime: number;
  endTime: number;
  initialValue: number;
  finalValue: number;
  rawTimestamps: RawTimestamp[];
  isGrouped: boolean;
  isCollapsed: boolean;
  groupingReason: 'auto' | 'manual';
}
```

#### 2.2 그룹 관리 기능
- 자동 그룹핑/해제
- 수동 그룹 생성/분해
- 그룹 병합/분할
- 그룹 이름 변경

### Phase 3: 카드형 UI 시스템

#### 3.1 녹화 세션 카드
**카드 레이아웃**:
```
┌─────────────────────────────────────────┐
│ 🎬 [녹화] 영상 분석                      │
│ ├── 📅 2025-07-23 22:30                 │
│ ├── ⏱️ 총 시간: 2분 30초                │
│ ├── 📊 타임스탬프: 15개 (3그룹)         │
│ └── [📝 편집] [🗑️ 삭제] [📋 복사]      │
└─────────────────────────────────────────┘
```

**상태 관리**:
- 접기/펼치기
- 미리보기 썸네일
- 진행 상태 표시
- 오류/경고 알림

### Phase 4: 노래방 스타일 편집 패널

#### 4.1 편집 패널 구조
```
┌─────────────────────────────────────────────────────┐
│                🎥 미리보기 창                        │
│          (현재 재생 구간 + 진행 바)                  │
├─────────────────────────────────────────────────────┤
│  📋 타임스탬프 편집 테이블                           │
│ ┌────┬─────────┬─────────┬───────┬───────┬─────────┐ │
│ │ No │ 시작시간 │ 종료시간 │ 볼륨  │ 속도  │ 액션    │ │
│ ├────┼─────────┼─────────┼───────┼───────┼─────────┤ │
│ │ 1  │[1:23.45]│[1:28.12]│ [80%] │[1.0x] │[수정/삭제]│ │ ← 현재 재생 중 (하이라이트)
│ │ 2  │[1:28.12]│[1:35.78]│[100%] │[1.2x] │[수정/삭제]│ │
│ │📊  │[그룹] 속도조정 구간 (3개 항목)      │[펼치기] │ │
│ │ 5  │[2:15.33]│[2:22.67]│ [60%] │[0.8x] │[수정/삭제]│ │
│ └────┴─────────┴─────────┴───────┴───────┴─────────┘ │
├─────────────────────────────────────────────────────┤
│ [⏪ 이전] [⏸️ 일시정지] [▶️ 재생] [⏩ 다음] [💾 저장] │
└─────────────────────────────────────────────────────┘
```

#### 4.2 노래방 스타일 하이라이트
- 현재 재생 구간 실시간 하이라이트
- 부드러운 전환 애니메이션
- 구간별 색상 코딩
- 오버레이 미리보기

#### 4.3 정밀 편집 기능
- 드래그&드롭으로 구간 조정
- 밀리초 단위 시간 입력
- 실시간 미리보기
- 일괄 편집 (선택된 구간들)

---

## 📊 데이터베이스 스키마

### 녹화 세션 테이블
```sql
CREATE TABLE recording_sessions (
  id UUID PRIMARY KEY,
  title VARCHAR(255),
  video_id VARCHAR(50),
  duration INTEGER, -- 밀리초
  total_timestamps INTEGER,
  created_at TIMESTAMP,
  updated_at TIMESTAMP,
  metadata JSONB
);
```

### 타임스탬프 테이블
```sql
CREATE TABLE timestamps (
  id UUID PRIMARY KEY,
  session_id UUID REFERENCES recording_sessions(id),
  time_ms INTEGER, -- 밀리초 단위
  action_type VARCHAR(20),
  value_current DECIMAL,
  value_previous DECIMAL,
  group_id UUID,
  created_at TIMESTAMP
);
```

### 그룹 테이블
```sql
CREATE TABLE timestamp_groups (
  id UUID PRIMARY KEY,
  session_id UUID REFERENCES recording_sessions(id),
  group_type VARCHAR(20),
  start_time_ms INTEGER,
  end_time_ms INTEGER,
  initial_value DECIMAL,
  final_value DECIMAL,
  is_collapsed BOOLEAN DEFAULT true,
  grouping_reason VARCHAR(10)
);
```

---

## 🛠️ 기술 스택

### Frontend
- **React + TypeScript**: 메인 프레임워크
- **Tailwind CSS**: 스타일링
- **Zustand**: 상태 관리
- **React Query**: 서버 상태 관리
- **Framer Motion**: 애니메이션

### Backend (향후 확장)
- **Node.js + Express**: API 서버
- **PostgreSQL**: 메인 데이터베이스
- **Redis**: 캐싱 및 세션 관리

### 외부 API
- **YouTube IFrame Player API**: 영상 재생 제어
- **YouTube Data API v3**: 영상 정보 조회

---

## 📅 개발 로드맵

### Phase 1: 기본 녹화 (2-3주)
- [x] 기존 오버레이 시스템 완성
- [ ] 녹화 모드 UI 구현
- [ ] 실시간 조작 감지 로직
- [ ] 기본 타임스탬프 생성/저장

### Phase 2: 스마트 그룹핑 (2-3주)
- [ ] 연속 조정 감지 알고리즘
- [ ] 자동 그룹핑 로직
- [ ] 그룹 관리 UI
- [ ] 수동 그룹 편집 기능

### Phase 3: 카드형 UI (1-2주)
- [ ] 세션 카드 컴포넌트
- [ ] 카드 상태 관리
- [ ] 썸네일 및 미리보기
- [ ] 카드 액션 (편집/삭제/복사)

### Phase 4: 편집 패널 (3-4주)
- [ ] 모달 기반 편집 환경
- [ ] 테이블 형태 타임스탬프 뷰
- [ ] 노래방 스타일 하이라이트
- [ ] 정밀 편집 도구

### Phase 5: 고급 기능 (2-3주)
- [ ] 일괄 편집 기능
- [ ] 템플릿 시스템
- [ ] 내보내기/가져오기
- [ ] 성능 최적화

---

## 🎨 UI/UX 가이드라인

### 색상 체계
- **녹화 중**: 빨간색 (#EF4444)
- **재생 중**: 파란색 (#3B82F6)
- **그룹 상태**: 보라색 (#8B5CF6)
- **편집 중**: 주황색 (#F97316)

### 아이콘 체계
- 🔴 녹화 시작/중
- ⏹️ 녹화 종료
- 🎬 녹화 세션
- 📊 타임스탬프 그룹
- ⚡ 병합된 그룹
- 🎯 현재 재생 위치

### 애니메이션 원칙
- 부드러운 전환 (300ms ease-in-out)
- 의미있는 피드백
- 과도하지 않은 효과
- 접근성 고려 (prefer-reduced-motion)

---

## 🧪 테스트 계획

### 단위 테스트
- 그룹핑 알고리즘 정확성
- 시간 계산 로직
- 데이터 변환 함수

### 통합 테스트
- YouTube API 연동
- 실시간 데이터 동기화
- 상태 관리 플로우

### 사용자 테스트
- 녹화 워크플로우
- 편집 사용성
- 성능 측정

---

## 🚀 배포 및 운영

### 개발 환경
- **Local Development**: Vite Dev Server
- **Staging**: Vercel Preview
- **Production**: Vercel

### 모니터링
- 에러 트래킹: Sentry
- 사용자 분석: Google Analytics
- 성능 모니터링: Web Vitals

### 백업 및 복구
- 사용자 데이터 로컬 저장
- 클라우드 동기화 (선택사항)
- 내보내기/가져오기 기능

---

## 📝 추가 고려사항

### 접근성
- 키보드 네비게이션 지원
- 스크린 리더 호환성
- 고대비 모드 지원

### 성능 최적화
- 대용량 세션 처리
- 메모리 사용량 최적화
- 렌더링 성능 개선

### 확장 가능성
- 플러그인 시스템
- API 제공
- 다른 플랫폼 지원 (Vimeo, 로컬 파일)

---

## 🎯 성공 지표

### 기능적 지표
- 녹화 세션 완료율 > 90%
- 그룹핑 정확도 > 85%
- 편집 작업 완료율 > 80%

### 성능 지표
- 페이지 로딩 시간 < 3초
- 편집 패널 응답 시간 < 500ms
- 메모리 사용량 < 100MB

### 사용자 만족도
- NPS 점수 > 50
- 재사용률 > 70%
- 평균 세션 시간 > 10분

---

## 📞 연락처 및 피드백

**개발자**: Claude (AI Assistant)  
**프로젝트 위치**: /mnt/c/Users/ksj/OneDrive/바탕 화면/gemini/제작파일/유튜브노트/  
**GitHub**: 향후 레포지토리 생성 예정  

**피드백 채널**:
- 기능 제안: GitHub Issues
- 버그 리포트: GitHub Issues  
- 문의사항: 개발자 직접 연락

---

*"영상 분석의 새로운 패러다임을 만들어가는 혁신적인 프로젝트"* 🚀✨

---

**문서 버전**: v1.0  
**작성일**: 2025-07-23  
**마지막 업데이트**: 2025-07-23  