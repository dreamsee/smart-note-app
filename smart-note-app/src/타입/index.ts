// 채팅형 스마트 노트 시스템 타입 정의

// ==============================================
// 7차원 노트 시스템 타입 정의 (Phase 1)
// ==============================================

// 5차원: 우선순위/중요도 관련 타입들
export type 우선순위레벨타입 = 1 | 2 | 3 | 4 | 5;
export type 긴급도타입 = '즉시' | '당일' | '이번주' | '이번달' | '언젠가';

export type 중요도타입 = {
  긴급하고중요함: boolean;    // 1사분면: 즉시 처리
  중요하지만긴급하지않음: boolean; // 2사분면: 계획하여 처리  
  긴급하지만중요하지않음: boolean; // 3사분면: 위임하거나 빠르게 처리
  긴급하지도중요하지도않음: boolean; // 4사분면: 제거 고려
};

export interface 우선순위차원타입 {
  우선순위레벨: 우선순위레벨타입;
  긴급도: 긴급도타입;
  중요도매트릭스: 중요도타입;
  마감일?: Date;
  예상소요시간?: number; // 분 단위
}

// 6차원: 감정/톤 관련 타입들
export type 기본감정타입 = '기쁨' | '슬픔' | '분노' | '두려움' | '놀람' | '혐오';
export type 감정강도타입 = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10;
export type 텍스트톤타입 = 
  | '공식적' | '비공식적' | '친근한' | '차가운' 
  | '긍정적' | '부정적' | '중립적' | '유머러스'
  | '진지한' | '캐주얼한' | '비판적' | '칭찬하는';

export interface 기분상태타입 {
  주감정: 기본감정타입;
  부감정?: 기본감정타입[];
  전체강도: 감정강도타입;
  에너지레벨: 1 | 2 | 3 | 4 | 5; // 매우낮음~매우높음
}

export interface 감정차원타입 {
  기분상태: 기분상태타입;
  텍스트톤: 텍스트톤타입;
  감정노트?: string; // 감정에 대한 메모
  감정변화추적?: {
    이전상태?: 기분상태타입;
    변화시점: Date;
    변화원인?: string;
  };
}

// 7차원: 맥락/상황 관련 타입들
export interface 위치정보타입 {
  장소명?: string;
  좌표?: {
    위도: number;
    경도: number;
  };
  장소유형?: '집' | '사무실' | '카페' | '학교' | '야외' | '이동중' | '기타';
}

export type 상황유형타입 = 
  | '업무' | '학습' | '개인' | '가족' | '친구' | '취미'
  | '회의' | '브레인스토밍' | '검토' | '계획' | '실행' | '회고';

export interface 환경정보타입 {
  디바이스?: 'PC' | '모바일' | '태블릿';
  네트워크상태?: '온라인' | '오프라인' | '불안정';
  주변소음레벨?: 1 | 2 | 3 | 4 | 5; // 매우조용~매우시끄러움
  집중도?: 1 | 2 | 3 | 4 | 5; // 매우산만~매우집중
}

export type 작성목적타입 = 
  | '기록' | '정리' | '계획' | '아이디어' | '문제해결'
  | '학습' | '공유' | '보고' | '검토' | '임시메모';

export interface 맥락차원타입 {
  위치정보?: 위치정보타입;
  상황유형: 상황유형타입;
  환경정보: 환경정보타입;
  작성목적: 작성목적타입;
  참여자?: string[]; // 함께한 사람들
  관련프로젝트?: string; // 연관 프로젝트명
  컨텍스트노트?: string; // 상황에 대한 추가 설명
}

// ==============================================
// 기존 시스템 타입 정의
// ==============================================

export interface 폴더타입 {
  아이디: string;
  이름: string;
  노트목록: 노트타입[];
  폴더설정: 폴더설정타입;
}

export interface 노트타입 {
  아이디: string;
  제목: string;
  내용: string;
  요약?: string;
  태그목록?: string[];
  채팅메시지목록: 채팅메시지타입[];
  생성시간: Date;
  수정시간: Date;
  노트설정?: 노트설정타입; // 개별 노트 설정 (폴더 설정 override)
  
  // 7차원 노트 시스템 필드들 (Phase 1)
  우선순위차원?: 우선순위차원타입; // 5차원: 중요도/우선순위
  감정차원?: 감정차원타입; // 6차원: 감정/톤
  맥락차원?: 맥락차원타입; // 7차원: 맥락/상황
  
  // 4차원 확장: 관계 (기존 하위메시지 외 추가)
  관련노트목록?: string[]; // 연결된 다른 노트들
  노트유형?: '일반' | '회의록' | '아이디어' | '계획' | '학습' | '일기' | '프로젝트';
  참조출처?: string[]; // 외부 참조 링크나 문서
}

// 개별 노트별 설정 타입 (폴더 설정을 선택적으로 override)
export interface 노트설정타입 {
  시간표시여부?: boolean; // undefined면 폴더 설정 사용
  입력방식?: '단순채팅' | '카테고리형' | '대화형'; // undefined면 폴더 설정 사용
  하위입력활성화?: boolean; // undefined면 폴더 설정 사용
  카테고리목록?: string[]; // undefined면 폴더 설정 사용
  캐릭터목록?: 캐릭터타입[]; // undefined면 폴더 설정 사용
  
  // 🔥 통합 뷰 채팅 표시 설정
  채팅표시설정?: {
    최대표시개수: number; // 기본값: 7개
    표시순서: '최신순' | '시간순'; // 기본값: '최신순'
    스크롤표시여부: boolean; // 나머지 메시지 스크롤 여부
  };
  
  // 🔥 요약 표시 설정
  요약표시설정?: {
    기본상태: '접힘' | '펼침'; // 기본값: '접힘'
    접힘시위치: '상단' | '하단'; // 기본값: '하단'
    자동요약생성: boolean; // 향후 확장용
  };
}

export interface 채팅메시지타입 {
  아이디: string;
  텍스트: string;
  타임스탬프: Date;
  작성자?: string; // 대화형 입력에서 사용
  카테고리?: string; // 카테고리형 입력에서 사용
  말풍선위치?: '왼쪽' | '오른쪽'; // 대화형 입력에서 개별 메시지 위치
  하위메시지목록?: 채팅메시지타입[];
  
  // 7차원 노트 시스템 필드들 (Phase 1)
  우선순위차원?: 우선순위차원타입; // 5차원: 중요도/우선순위
  감정차원?: 감정차원타입; // 6차원: 감정/톤
  맥락차원?: 맥락차원타입; // 7차원: 맥락/상황
  
  // 4차원 확장: 관계 (기존 하위메시지 외 추가)
  관련메시지목록?: string[]; // 참조하는 다른 메시지들
  메시지유형?: '일반' | '질문' | '답변' | '아이디어' | '결론' | '액션아이템';
}

export interface 폴더설정타입 {
  시간표시여부: boolean;
  입력방식: '단순채팅' | '카테고리형' | '대화형';
  카테고리목록?: string[];
  캐릭터목록?: 캐릭터타입[];
  하위입력활성화: boolean;
  동적카테고리사용?: boolean; // 동적 카테고리 입력 사용 여부
  카테고리조합설정?: {
    조합자동명명: boolean; // 조합 이름 창 띄울지 여부
    조합목록: { [key: string]: string }; // "아침,점심" -> "브런치"
  };
  카테고리자동선택설정?: 카테고리자동선택타입;
  
  // 🔥 통합 뷰 기본 표시 설정
  기본채팅표시설정: {
    최대표시개수: number; // 기본값: 7개
    표시순서: '최신순' | '시간순'; // 기본값: '최신순'
    스크롤표시여부: boolean; // 나머지 메시지 스크롤 여부
  };
  기본요약표시설정: {
    기본상태: '접힘' | '펼침'; // 기본값: '접힘'
    접힘시위치: '상단' | '하단'; // 기본값: '하단'
    자동요약생성: boolean; // 향후 확장용
  };
}

// 카테고리 자동 선택 관련 타입
export interface 카테고리자동선택타입 {
  활성화: boolean; // 자동 선택 기능 켜기/끄기
  시간대별설정: { [시간대키: string]: string }; // "09": "회의", "14": "업무"
  연속패턴통계: { [이전카테고리: string]: { [다음카테고리: string]: number } }; // "회의" -> {"정리": 15, "업무": 5}
  사용빈도통계: { [카테고리: string]: number }; // 전체 사용 횟수
  마지막사용카테고리?: string;
  마지막사용시간?: Date;
  학습데이터갯수: number; // 총 학습한 데이터 수 (가중치 계산용)
}

export interface 캐릭터타입 {
  아이디: string;
  이름: string;
  기본위치: '왼쪽' | '오른쪽';
}

// 크기조절분할선 관련 타입
export interface 분할선설정타입 {
  왼쪽패널분할비율: number; // 폴더목록 vs 채팅패널 비율
  오른쪽패널분할비율?: number; // 향후 확장용
}

// MVP 단계에서는 기본적인 타입만 사용
export interface 앱상태타입 {
  폴더목록: 폴더타입[];
  활성폴더: 폴더타입 | null;
  활성노트: 노트타입 | null;
  분할선설정: 분할선설정타입;
}