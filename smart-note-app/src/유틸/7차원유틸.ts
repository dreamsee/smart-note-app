import { 
  ìš°ì„ ìˆœìœ„ì°¨ì›íƒ€ì…, 
  ê°ì •ì°¨ì›íƒ€ì…, 
  ë§¥ë½ì°¨ì›íƒ€ì…,
  ìš°ì„ ìˆœìœ„ë ˆë²¨íƒ€ì…,
  ê¸´ê¸‰ë„íƒ€ì…,
  ì¤‘ìš”ë„íƒ€ì…,
  ê¸°ë³¸ê°ì •íƒ€ì…,
  ê°ì •ê°•ë„íƒ€ì…,
  í…ìŠ¤íŠ¸í†¤íƒ€ì…,
  ê¸°ë¶„ìƒíƒœíƒ€ì…,
  ìƒí™©ìœ í˜•íƒ€ì…,
  ì‘ì„±ëª©ì íƒ€ì…,
  í™˜ê²½ì •ë³´íƒ€ì…,
  ìœ„ì¹˜ì •ë³´íƒ€ì…
} from '../íƒ€ì…';

// ==============================================
// 5ì°¨ì›: ìš°ì„ ìˆœìœ„/ì¤‘ìš”ë„ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
// ==============================================

/**
 * ê¸°ë³¸ ìš°ì„ ìˆœìœ„ ì„¤ì •ì„ ìƒì„±í•©ë‹ˆë‹¤
 */
export const ê¸°ë³¸ìš°ì„ ìˆœìœ„ì°¨ì›ìƒì„± = (): ìš°ì„ ìˆœìœ„ì°¨ì›íƒ€ì… => ({
  ìš°ì„ ìˆœìœ„ë ˆë²¨: 3,
  ê¸´ê¸‰ë„: 'ì–¸ì  ê°€',
  ì¤‘ìš”ë„ë§¤íŠ¸ë¦­ìŠ¤: {
    ê¸´ê¸‰í•˜ê³ ì¤‘ìš”í•¨: false,
    ì¤‘ìš”í•˜ì§€ë§Œê¸´ê¸‰í•˜ì§€ì•ŠìŒ: false,
    ê¸´ê¸‰í•˜ì§€ë§Œì¤‘ìš”í•˜ì§€ì•ŠìŒ: false,
    ê¸´ê¸‰í•˜ì§€ë„ì¤‘ìš”í•˜ì§€ë„ì•ŠìŒ: true
  }
});

/**
 * ìš°ì„ ìˆœìœ„ ë ˆë²¨ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤
 */
export const ìš°ì„ ìˆœìœ„ë ˆë²¨í…ìŠ¤íŠ¸ë³€í™˜ = (ë ˆë²¨: ìš°ì„ ìˆœìœ„ë ˆë²¨íƒ€ì…): string => {
  const ë ˆë²¨ë§µ = {
    1: 'ğŸ”´ ìµœê³ ',
    2: 'ğŸŸ  ë†’ìŒ', 
    3: 'ğŸŸ¡ ë³´í†µ',
    4: 'ğŸŸ¢ ë‚®ìŒ',
    5: 'âšª ìµœì €'
  };
  return ë ˆë²¨ë§µ[ë ˆë²¨];
};

/**
 * ê¸´ê¸‰ë„ì— ë”°ë¥¸ ìƒ‰ìƒì„ ë°˜í™˜í•©ë‹ˆë‹¤
 */
export const ê¸´ê¸‰ë„ìƒ‰ìƒê°€ì ¸ì˜¤ê¸° = (ê¸´ê¸‰ë„: ê¸´ê¸‰ë„íƒ€ì…): string => {
  const ìƒ‰ìƒë§µ = {
    'ì¦‰ì‹œ': '#dc3545',
    'ë‹¹ì¼': '#fd7e14', 
    'ì´ë²ˆì£¼': '#ffc107',
    'ì´ë²ˆë‹¬': '#28a745',
    'ì–¸ì  ê°€': '#6c757d'
  };
  return ìƒ‰ìƒë§µ[ê¸´ê¸‰ë„];
};

/**
 * ì•„ì´ì  í•˜ì›Œ ë§¤íŠ¸ë¦­ìŠ¤ ì‚¬ë¶„ë©´ì„ íŒë‹¨í•©ë‹ˆë‹¤
 */
export const ì¤‘ìš”ë„ë§¤íŠ¸ë¦­ìŠ¤ì‚¬ë¶„ë©´íŒë‹¨ = (ì¤‘ìš”ë„: ì¤‘ìš”ë„íƒ€ì…): 1 | 2 | 3 | 4 => {
  if (ì¤‘ìš”ë„.ê¸´ê¸‰í•˜ê³ ì¤‘ìš”í•¨) return 1;
  if (ì¤‘ìš”ë„.ì¤‘ìš”í•˜ì§€ë§Œê¸´ê¸‰í•˜ì§€ì•ŠìŒ) return 2;
  if (ì¤‘ìš”ë„.ê¸´ê¸‰í•˜ì§€ë§Œì¤‘ìš”í•˜ì§€ì•ŠìŒ) return 3;
  return 4;
};

/**
 * ìš°ì„ ìˆœìœ„ ì ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤ (1-100ì )
 */
export const ìš°ì„ ìˆœìœ„ì ìˆ˜ê³„ì‚° = (ìš°ì„ ìˆœìœ„: ìš°ì„ ìˆœìœ„ì°¨ì›íƒ€ì…): number => {
  let ì ìˆ˜ = 0;
  
  // ìš°ì„ ìˆœìœ„ ë ˆë²¨ (40ì )
  ì ìˆ˜ += (6 - ìš°ì„ ìˆœìœ„.ìš°ì„ ìˆœìœ„ë ˆë²¨) * 8;
  
  // ê¸´ê¸‰ë„ (30ì )
  const ê¸´ê¸‰ë„ì ìˆ˜ë§µ = { 'ì¦‰ì‹œ': 30, 'ë‹¹ì¼': 24, 'ì´ë²ˆì£¼': 18, 'ì´ë²ˆë‹¬': 12, 'ì–¸ì  ê°€': 6 };
  ì ìˆ˜ += ê¸´ê¸‰ë„ì ìˆ˜ë§µ[ìš°ì„ ìˆœìœ„.ê¸´ê¸‰ë„];
  
  // ì¤‘ìš”ë„ ë§¤íŠ¸ë¦­ìŠ¤ (30ì )
  const ì‚¬ë¶„ë©´ = ì¤‘ìš”ë„ë§¤íŠ¸ë¦­ìŠ¤ì‚¬ë¶„ë©´íŒë‹¨(ìš°ì„ ìˆœìœ„.ì¤‘ìš”ë„ë§¤íŠ¸ë¦­ìŠ¤);
  ì ìˆ˜ += (5 - ì‚¬ë¶„ë©´) * 7.5;
  
  return Math.min(100, Math.max(0, ì ìˆ˜));
};

// ==============================================
// 6ì°¨ì›: ê°ì •/í†¤ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
// ==============================================

/**
 * ê¸°ë³¸ ê°ì • ì°¨ì›ì„ ìƒì„±í•©ë‹ˆë‹¤
 */
export const ê¸°ë³¸ê°ì •ì°¨ì›ìƒì„± = (): ê°ì •ì°¨ì›íƒ€ì… => ({
  ê¸°ë¶„ìƒíƒœ: {
    ì£¼ê°ì •: 'ê¸°ì¨',
    ì „ì²´ê°•ë„: 5,
    ì—ë„ˆì§€ë ˆë²¨: 3
  },
  í…ìŠ¤íŠ¸í†¤: 'ì¤‘ë¦½ì '
});

/**
 * ê°ì •ì„ ì´ëª¨ì§€ë¡œ ë³€í™˜í•©ë‹ˆë‹¤
 */
export const ê°ì •ì´ëª¨ì§€ë³€í™˜ = (ê°ì •: ê¸°ë³¸ê°ì •íƒ€ì…): string => {
  const ê°ì •ì´ëª¨ì§€ë§µ = {
    'ê¸°ì¨': 'ğŸ˜Š',
    'ìŠ¬í””': 'ğŸ˜¢',
    'ë¶„ë…¸': 'ğŸ˜ ',
    'ë‘ë ¤ì›€': 'ğŸ˜¨',
    'ë†€ëŒ': 'ğŸ˜²',
    'í˜ì˜¤': 'ğŸ¤¢'
  };
  return ê°ì •ì´ëª¨ì§€ë§µ[ê°ì •];
};

/**
 * ê°ì • ê°•ë„ì— ë”°ë¥¸ ìƒ‰ìƒì„ ë°˜í™˜í•©ë‹ˆë‹¤
 */
export const ê°ì •ê°•ë„ìƒ‰ìƒê°€ì ¸ì˜¤ê¸° = (ê°•ë„: ê°ì •ê°•ë„íƒ€ì…): string => {
  if (ê°•ë„ <= 2) return '#28a745'; // ë‚®ìŒ: ì´ˆë¡
  if (ê°•ë„ <= 4) return '#17a2b8'; // ì•½ê°„: íŒŒë‘  
  if (ê°•ë„ <= 6) return '#ffc107'; // ë³´í†µ: ë…¸ë‘
  if (ê°•ë„ <= 8) return '#fd7e14'; // ë†’ìŒ: ì£¼í™©
  return '#dc3545'; // ë§¤ìš°ë†’ìŒ: ë¹¨ê°•
};

/**
 * í…ìŠ¤íŠ¸ í†¤ì— ë”°ë¥¸ ìŠ¤íƒ€ì¼ì„ ë°˜í™˜í•©ë‹ˆë‹¤
 */
export const í…ìŠ¤íŠ¸í†¤ìŠ¤íƒ€ì¼ê°€ì ¸ì˜¤ê¸° = (í†¤: í…ìŠ¤íŠ¸í†¤íƒ€ì…): { color: string; fontStyle?: string } => {
  const í†¤ìŠ¤íƒ€ì¼ë§µ: Record<í…ìŠ¤íŠ¸í†¤íƒ€ì…, { color: string; fontStyle?: string }> = {
    'ê³µì‹ì ': { color: '#343a40' },
    'ë¹„ê³µì‹ì ': { color: '#6c757d' },
    'ì¹œê·¼í•œ': { color: '#28a745' },
    'ì°¨ê°€ìš´': { color: '#17a2b8' },
    'ê¸ì •ì ': { color: '#28a745' },
    'ë¶€ì •ì ': { color: '#dc3545' },
    'ì¤‘ë¦½ì ': { color: '#6c757d' },
    'ìœ ë¨¸ëŸ¬ìŠ¤': { color: '#ffc107', fontStyle: 'italic' },
    'ì§„ì§€í•œ': { color: '#343a40' },
    'ìºì£¼ì–¼í•œ': { color: '#17a2b8' },
    'ë¹„íŒì ': { color: '#fd7e14' },
    'ì¹­ì°¬í•˜ëŠ”': { color: '#28a745' }
  };
  return í†¤ìŠ¤íƒ€ì¼ë§µ[í†¤];
};

/**
 * ê°ì • ë³€í™” ì¶”ì´ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤
 */
export const ê°ì •ë³€í™”ì¶”ì´ë¶„ì„ = (ì´ì „ìƒíƒœ?: ê¸°ë¶„ìƒíƒœíƒ€ì…, í˜„ì¬ìƒíƒœ?: ê¸°ë¶„ìƒíƒœíƒ€ì…): string => {
  if (!ì´ì „ìƒíƒœ || !í˜„ì¬ìƒíƒœ) return 'ë³€í™” ì—†ìŒ';
  
  const ê°•ë„ì°¨ì´ = í˜„ì¬ìƒíƒœ.ì „ì²´ê°•ë„ - ì´ì „ìƒíƒœ.ì „ì²´ê°•ë„;
  const ì—ë„ˆì§€ì°¨ì´ = í˜„ì¬ìƒíƒœ.ì—ë„ˆì§€ë ˆë²¨ - ì´ì „ìƒíƒœ.ì—ë„ˆì§€ë ˆë²¨;
  
  if (ê°•ë„ì°¨ì´ > 2) return 'ê°ì • ìƒìŠ¹ ğŸ“ˆ';
  if (ê°•ë„ì°¨ì´ < -2) return 'ê°ì • í•˜ë½ ğŸ“‰';
  if (ì—ë„ˆì§€ì°¨ì´ > 1) return 'ì—ë„ˆì§€ ì¦ê°€ âš¡';
  if (ì—ë„ˆì§€ì°¨ì´ < -1) return 'ì—ë„ˆì§€ ê°ì†Œ ğŸ”‹';
  
  return 'ì•ˆì •ì  ğŸ˜Œ';
};

// ==============================================
// 7ì°¨ì›: ë§¥ë½/ìƒí™© ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
// ==============================================

/**
 * ê¸°ë³¸ ë§¥ë½ ì°¨ì›ì„ ìƒì„±í•©ë‹ˆë‹¤
 */
export const ê¸°ë³¸ë§¥ë½ì°¨ì›ìƒì„± = (): ë§¥ë½ì°¨ì›íƒ€ì… => ({
  ìƒí™©ìœ í˜•: 'ê°œì¸',
  í™˜ê²½ì •ë³´: {
    ì§‘ì¤‘ë„: 3
  },
  ì‘ì„±ëª©ì : 'ê¸°ë¡'
});

/**
 * ìƒí™© ìœ í˜•ì— ë”°ë¥¸ ì•„ì´ì½˜ì„ ë°˜í™˜í•©ë‹ˆë‹¤
 */
export const ìƒí™©ìœ í˜•ì•„ì´ì½˜ê°€ì ¸ì˜¤ê¸° = (ìƒí™©: ìƒí™©ìœ í˜•íƒ€ì…): string => {
  const ìƒí™©ì•„ì´ì½˜ë§µ = {
    'ì—…ë¬´': 'ğŸ’¼',
    'í•™ìŠµ': 'ğŸ“š',
    'ê°œì¸': 'ğŸ‘¤',
    'ê°€ì¡±': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
    'ì¹œêµ¬': 'ğŸ‘¥',
    'ì·¨ë¯¸': 'ğŸ¨',
    'íšŒì˜': 'ğŸ¤',
    'ë¸Œë ˆì¸ìŠ¤í† ë°': 'ğŸ’¡',
    'ê²€í† ': 'ğŸ”',
    'ê³„íš': 'ğŸ“‹',
    'ì‹¤í–‰': 'ğŸš€',
    'íšŒê³ ': 'ğŸ”„'
  };
  return ìƒí™©ì•„ì´ì½˜ë§µ[ìƒí™©];
};

/**
 * ì‘ì„± ëª©ì ì— ë”°ë¥¸ ìƒ‰ìƒì„ ë°˜í™˜í•©ë‹ˆë‹¤
 */
export const ì‘ì„±ëª©ì ìƒ‰ìƒê°€ì ¸ì˜¤ê¸° = (ëª©ì : ì‘ì„±ëª©ì íƒ€ì…): string => {
  const ëª©ì ìƒ‰ìƒë§µ = {
    'ê¸°ë¡': '#6c757d',
    'ì •ë¦¬': '#17a2b8',
    'ê³„íš': '#28a745',
    'ì•„ì´ë””ì–´': '#ffc107',
    'ë¬¸ì œí•´ê²°': '#fd7e14',
    'í•™ìŠµ': '#007bff',
    'ê³µìœ ': '#20c997',
    'ë³´ê³ ': '#6f42c1',
    'ê²€í† ': '#e83e8c',
    'ì„ì‹œë©”ëª¨': '#adb5bd'
  };
  return ëª©ì ìƒ‰ìƒë§µ[ëª©ì ];
};

/**
 * ì§‘ì¤‘ë„ ë ˆë²¨ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤
 */
export const ì§‘ì¤‘ë„í…ìŠ¤íŠ¸ë³€í™˜ = (ì§‘ì¤‘ë„?: number): string => {
  if (!ì§‘ì¤‘ë„) return 'ì•Œ ìˆ˜ ì—†ìŒ';
  
  const ì§‘ì¤‘ë„ë§µ = {
    1: 'ë§¤ìš° ì‚°ë§Œ ğŸ˜µâ€ğŸ’«',
    2: 'ì‚°ë§Œí•¨ ğŸ˜”',
    3: 'ë³´í†µ ğŸ˜',
    4: 'ì§‘ì¤‘ë¨ ğŸ˜Š',
    5: 'ë§¤ìš° ì§‘ì¤‘ ğŸ¯'
  };
  return ì§‘ì¤‘ë„ë§µ[ì§‘ì¤‘ë„ as keyof typeof ì§‘ì¤‘ë„ë§µ] || 'ì•Œ ìˆ˜ ì—†ìŒ';
};

/**
 * ì¥ì†Œ ìœ í˜•ì— ë”°ë¥¸ ì•„ì´ì½˜ì„ ë°˜í™˜í•©ë‹ˆë‹¤
 */
export const ì¥ì†Œìœ í˜•ì•„ì´ì½˜ê°€ì ¸ì˜¤ê¸° = (ì¥ì†Œ?: 'ì§‘' | 'ì‚¬ë¬´ì‹¤' | 'ì¹´í˜' | 'í•™êµ' | 'ì•¼ì™¸' | 'ì´ë™ì¤‘' | 'ê¸°íƒ€'): string => {
  if (!ì¥ì†Œ) return 'ğŸ“';
  
  const ì¥ì†Œì•„ì´ì½˜ë§µ = {
    'ì§‘': 'ğŸ ',
    'ì‚¬ë¬´ì‹¤': 'ğŸ¢',
    'ì¹´í˜': 'â˜•',
    'í•™êµ': 'ğŸ«',
    'ì•¼ì™¸': 'ğŸŒ³',
    'ì´ë™ì¤‘': 'ğŸš—',
    'ê¸°íƒ€': 'ğŸ“'
  };
  return ì¥ì†Œì•„ì´ì½˜ë§µ[ì¥ì†Œ];
};

// ==============================================
// í†µí•© ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
// ==============================================

/**
 * 7ì°¨ì› ë°ì´í„° ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤
 */
export const ì°¨ì›ë°ì´í„°ìœ íš¨ì„±ê²€ì‚¬ = {
  ìš°ì„ ìˆœìœ„: (ë°ì´í„°: ìš°ì„ ìˆœìœ„ì°¨ì›íƒ€ì…): boolean => {
    return ë°ì´í„°.ìš°ì„ ìˆœìœ„ë ˆë²¨ >= 1 && ë°ì´í„°.ìš°ì„ ìˆœìœ„ë ˆë²¨ <= 5;
  },
  
  ê°ì •: (ë°ì´í„°: ê°ì •ì°¨ì›íƒ€ì…): boolean => {
    const ìœ íš¨í•œê°ì •ë“¤: ê¸°ë³¸ê°ì •íƒ€ì…[] = ['ê¸°ì¨', 'ìŠ¬í””', 'ë¶„ë…¸', 'ë‘ë ¤ì›€', 'ë†€ëŒ', 'í˜ì˜¤'];
    return ìœ íš¨í•œê°ì •ë“¤.includes(ë°ì´í„°.ê¸°ë¶„ìƒíƒœ.ì£¼ê°ì •);
  },
  
  ë§¥ë½: (ë°ì´í„°: ë§¥ë½ì°¨ì›íƒ€ì…): boolean => {
    return ë°ì´í„°.í™˜ê²½ì •ë³´.ì§‘ì¤‘ë„! >= 1 && ë°ì´í„°.í™˜ê²½ì •ë³´.ì§‘ì¤‘ë„! <= 5;
  }
};

/**
 * 7ì°¨ì› ë°ì´í„°ë¥¼ ìš”ì•½ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤
 */
export const ì°¨ì›ë°ì´í„°ìš”ì•½ìƒì„± = (
  ìš°ì„ ìˆœìœ„?: ìš°ì„ ìˆœìœ„ì°¨ì›íƒ€ì…,
  ê°ì •?: ê°ì •ì°¨ì›íƒ€ì…,
  ë§¥ë½?: ë§¥ë½ì°¨ì›íƒ€ì…
): string => {
  const ìš”ì•½ë¶€ë¶„ë“¤: string[] = [];
  
  if (ìš°ì„ ìˆœìœ„) {
    ìš”ì•½ë¶€ë¶„ë“¤.push(`ìš°ì„ ìˆœìœ„: ${ìš°ì„ ìˆœìœ„ë ˆë²¨í…ìŠ¤íŠ¸ë³€í™˜(ìš°ì„ ìˆœìœ„.ìš°ì„ ìˆœìœ„ë ˆë²¨)}`);
  }
  
  if (ê°ì •) {
    ìš”ì•½ë¶€ë¶„ë“¤.push(`ê°ì •: ${ê°ì •ì´ëª¨ì§€ë³€í™˜(ê°ì •.ê¸°ë¶„ìƒíƒœ.ì£¼ê°ì •)} ${ê°ì •.ê¸°ë¶„ìƒíƒœ.ì „ì²´ê°•ë„}/10`);
  }
  
  if (ë§¥ë½) {
    ìš”ì•½ë¶€ë¶„ë“¤.push(`ìƒí™©: ${ìƒí™©ìœ í˜•ì•„ì´ì½˜ê°€ì ¸ì˜¤ê¸°(ë§¥ë½.ìƒí™©ìœ í˜•)} ${ë§¥ë½.ìƒí™©ìœ í˜•}`);
  }
  
  return ìš”ì•½ë¶€ë¶„ë“¤.join(' | ') || 'ì°¨ì› ì •ë³´ ì—†ìŒ';
};

/**
 * ê¸°ë³¸ 7ì°¨ì› ë°ì´í„° ì„¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
 */
export const ê¸°ë³¸7ì°¨ì›ë°ì´í„°ìƒì„± = () => ({
  ìš°ì„ ìˆœìœ„ì°¨ì›: ê¸°ë³¸ìš°ì„ ìˆœìœ„ì°¨ì›ìƒì„±(),
  ê°ì •ì°¨ì›: ê¸°ë³¸ê°ì •ì°¨ì›ìƒì„±(),
  ë§¥ë½ì°¨ì›: ê¸°ë³¸ë§¥ë½ì°¨ì›ìƒì„±()
});

/**
 * ë§ˆê°ì¼ê¹Œì§€ ë‚¨ì€ ì‹œê°„ì„ ê³„ì‚°í•©ë‹ˆë‹¤
 */
export const ë§ˆê°ì¼ê¹Œì§€ì‹œê°„ê³„ì‚° = (ë§ˆê°ì¼?: Date): string => {
  if (!ë§ˆê°ì¼) return 'ë§ˆê°ì¼ ì—†ìŒ';
  
  const ì§€ê¸ˆ = new Date();
  const ì°¨ì´ = ë§ˆê°ì¼.getTime() - ì§€ê¸ˆ.getTime();
  
  if (ì°¨ì´ < 0) return 'âš ï¸ ë§ˆê°ì¼ ì§€ë‚¨';
  
  const ì¼ìˆ˜ = Math.floor(ì°¨ì´ / (1000 * 60 * 60 * 24));
  const ì‹œê°„ìˆ˜ = Math.floor((ì°¨ì´ % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  
  if (ì¼ìˆ˜ > 0) return `â° ${ì¼ìˆ˜}ì¼ ${ì‹œê°„ìˆ˜}ì‹œê°„ ë‚¨ìŒ`;
  if (ì‹œê°„ìˆ˜ > 0) return `â° ${ì‹œê°„ìˆ˜}ì‹œê°„ ë‚¨ìŒ`;
  
  const ë¶„ìˆ˜ = Math.floor((ì°¨ì´ % (1000 * 60 * 60)) / (1000 * 60));
  return `â° ${ë¶„ìˆ˜}ë¶„ ë‚¨ìŒ`;
};